namespace DcsTranslateTool.Win.Constants;
/// <summary>
/// 環境メッセージ用暗号鍵を組み立てるクラスである。
/// </summary>
internal static class CryptKey {
    private static readonly Lazy<byte[]> _key = new(CreateKey);

    /// <summary>
    /// 暗号鍵を取得する。
    /// </summary>
    internal static byte[] GetKey() => _key.Value;

    private static byte[] CreateKey() {
        ReadOnlySpan<byte> part1 = [
            0x10,0x22,0x33,0x44,0x55,0x66,0x77,0x88,
            0x99,0xaa,0xbb,0xcc,0xdd,0xee,0xff,0x00,
            0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,
            0x99,0xaa,0xbb,0xcc,0xdd,0xee,0xff,0x00 ];
        ReadOnlySpan<byte> part2 = [
            0xff,0xee,0xdd,0xcc,0xbb,0xaa,0x99,0x88,
            0x77,0x66,0x55,0x44,0x33,0x22,0x11,0x00,
            0xff,0xee,0xdd,0xcc,0xbb,0xaa,0x99,0x88,
            0x77,0x66,0x55,0x44,0x33,0x22,0x11,0x00 ];
        var key = new byte[32];
        for(var i = 0; i < key.Length; i++) {
            key[i] = (byte)(part1[i] ^ part2[i]);
        }
        return key;
    }
}